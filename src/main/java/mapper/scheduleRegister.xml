<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gathering.schedule">
	<insert id="insert" parameterType="scheduleRegister">
		insert into schedule values(sch_seq.nextval, #{sche_gno}, #{sche_name}, #{sche_date},
		#{sche_loc}, #{sche_fee}, #{sche_limit}, #{sche_chat}, #{sche_master}, #{sche_context})
	</insert>

	<select id="listall" resultType="scheduleRegister">
		select s.sche_date, s.sche_loc, s.sche_fee, s.sche_context
		from schedule s, gathering g
		<![CDATA[ where s.sche_date > sysdate and g.gath_no=s.sche_gno and g.gath_no=#{gath_no} ]]>
		order by s.sche_date
	</select>
	
	<select id="moimlistall" resultType="scheduleRegister">
		select s.sche_name, s.sche_date, s.sche_loc, s.sche_context, s.sche_master
		from schedule s, gathering g
		where g.gath_no=s.sche_gno and g.gath_no=#{gath_no}
		order by s.sche_date
	</select>
	
	<select id="calendarList" resultType="scheduleRegister">
		select s.sche_date
		from schedule s, gathering g
		<![CDATA[ where s.sche_date > sysdate and g.gath_no=s.sche_gno and g.gath_no=#{gath_no} ]]>
		order by s.sche_date
	</select>
</mapper>